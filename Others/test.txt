<div id="2020-dem-map" style="height:95vh; padding-top:10px;"></div>

<style>body { font-family:"Segoe UI"; }</style>

<script src="https://www.amcharts.com/lib/4/core.js"></script>
<script src="https://www.amcharts.com/lib/4/maps.js"></script>
<script src="https://www.amcharts.com/lib/4/geodata/region/usa/iaLow.js"></script>

<script>

var chart = am4core.create("2020-dem-map", "MapChart");
chart.geodata = am4geodata_region_usa_iaLow;
chart.projection = new am4maps.projections.AlbersUsa();
chart.seriesContainer.events.disableType("doublehit");
chart.seriesContainer.draggable = false;
chart.chartContainer.wheelable = false;

var usamap = chart.series.push(new am4maps.MapPolygonSeries());
usamap.useGeodata = true;
usamap.dataSource.url = "//raw.githubusercontent.com/NirOzFiles/USA/Election/2016/Primaries/IA.json";
usamap.mapPolygons.template.propertyFields.fill = "fill";
usamap.mapPolygons.template.tooltipHTML = "{winner}";

usamap.dataSource.events.on("parseended", function(ev) {
 var data = ev.target.data;
 for (var i = 0; i < data.length; i++) {
  if ( data[i]["Hillary Clinton"] > data[i]["Bernie Sanders"] ) { data[i]["fill"] = "#64b5f6"; data[i]["winner"] = "<table border='1'><tr><td>הילרי קלינטון</td><td>" + data[i]['Hillary Clinton'] + "</td></tr><tr><td>ברני סנדרס</td><td>" + data[i]['Bernie Sanders'] + "</td></tr></table>"; }
  if ( data[i]["Hillary Clinton"] < data[i]["Bernie Sanders"] ) { data[i]["fill"] = "#aed581"; data[i]["winner"] = "סנדרס"; }
  if ( data[i]["Hillary Clinton"] == data[i]["Bernie Sanders"] ) { data[i]["winner"] = "שיוויון"; }
 }
});

</script>